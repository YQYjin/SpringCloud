<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <title>员工主页</title>
    <!-- 引入layui的CSS文件 -->
    <link rel="stylesheet" href="https://cdn.staticfile.org/layui/2.5.7/css/layui.css">

    <style>
        /* 自定义样式 */
        .custom-header {
            font-size: 24px;
            /* 调整标题字体大小 */
        }

        .custom-header-2 {
            font-size: 18px;
            /* 调整标题字体大小 */
        }

        .custom-welcome {
            font-size: 20px;
            /* 欢迎消息字体大小 */
        }

        .custom-button-left {
            margin-left: 110px;
            /* Adjust the distance from the left edge as needed */
        }
    </style>
</head>

<body>
    <div class="layui-container">
        <div class="layui-row">
            <!-- 左侧部分 -->
            <div class="layui-col-md12">
                <div class="layui-card">
                    <p>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                    </p>
                    <!-- <div class="layui-card-header custom-header" th:text="${userName+',欢迎!'}"> -->
                </div>

                <div class="layui-card-body layui-edge-right">
                    <a href="http://localhost:8080/employee/logout" class="layui-btn ">登出</a>
                    <button class="layui-btn " id="addOrderBtn">创建订单</button>
                    <button class="layui-btn " id="addCustomerBtn">新建客户</button>
                    <button class="layui-btn " id="userInfoBtn">个人信息</button>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>
    <div class="layui-container">
        <div class="layui-row">
            <!-- 左侧部分 -->
            <div class="layui-col-md12">
                <div class="layui-card">
                    <p>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                    </p>
                    <div class="layui-card-header custom-header layui-edge-right">客户管理</div>
                    <div class="layui-card-header custom-header-2 layui-edge-right">客户查询</div>
                    <div class="layui-card-body">
                        <div class="layui-form-item">
                            <label class="layui-form-label">客户姓名:</label>
                            <div class="layui-input-inline">
                                <input type="text" id="queryName" lay-verify="required" class="layui-input"
                                    placeholder="请输入要查询的客户姓名">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">客户电话:</label>
                            <div class="layui-input-inline">
                                <input type="text" id="queryPhone" lay-verify="required" placeholder="请输入要查询的客户电话"
                                    class="layui-input">
                            </div>

                        </div>
                        <button class="layui-btn custom-button-left" id="queryBtn">查询</button>
                    </div>
                </div>
                <div class="layui-card">

                    <div class="layui-card-header custom-header-2 layui-edge-right ">查询结果</div>
                    <div class="layui-card-body">
                        <div class="layui-container">
                            <!-- 这里设置display: none 是避免多余的表头显示 -->
                            <table class="layui-table" lay-filter="queryCustomerTable" id="queryCustomerTable"
                                style="display: none;">
                                <thead>
                                    <tr>
                                        <th lay-data="{field:'id', width:100}">客户编号</th>
                                        <th lay-data="{field:'username', width:100}">客户姓名</th>
                                        <th lay-data="{field:'gender', width:100}">客户性别</th>
                                        <th lay-data="{field:'phoneNumber', width:100}">客户电话</th>
                                        <th lay-data="{field:'totalConsumption', width:100}">消费额</th>
                                        <th lay-data="{fixed:'right', width:150, align:'center', toolbar:'#bar'}">操作
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="layui-col-md12">
                <div class="layui-card">
                    <p>
                        <br>
                        <br>
                        <br>

                    </p>
                    <div class="layui-card-header custom-header layui-edge-right">客户跟进</div>
                    <div class="layui-card">
                        <div class="layui-card-body">
                            <div class="layui-container">
                                <!-- 这里设置display: none 是避免多余的表头显示 -->
                                <table class="layui-table" lay-filter="customerFollowTable" id="customerFollowTable"
                                    style="display: none;">
                                    <thead>
                                        <tr>
                                            <th lay-data="{field:'id', width:100}">客户编号</th>
                                            <th lay-data="{field:'username', width:100}">客户姓名</th>
                                            <th lay-data="{field:'gender', width:100}">客户性别</th>
                                            <th lay-data="{field:'phoneNumber', width:100}">客户电话</th>
                                            <th lay-data="{field:'totalConsumption', width:100}">消费额</th>
                                            <th lay-data="{field:'recentOrderTime', width:100}">最近下单时间</th>
                                            <th lay-data="{fixed:'right', width:150, align:'center', toolbar:'#bar'}">操作
                                            </th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- <div class="layui-container">
        <div class="layui-row">
            
            <div class="layui-col-md12">
                <div class="layui-card">
                    <p>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                    </p>
                    <div class="layui-card-header custom-header layui-edge-right">订单管理</div>
                    <div class="layui-card-header custom-header-2 layui-edge-right">全部订单</div>
                    <div class="layui-card-body">
                        <div class="layui-container">
                            
                            <table class="layui-table" lay-filter="orderTable" id="orderTable" >
                                <thead>
                                    <tr>
                                        <th lay-data="{field:'id', width:100}">订单编号</th>
                                    <th lay-data="{field:'orderTime', width:100}">下单时间</th>
                                    <th lay-data="{field:'amountMoney', width:100}">订单金额</th>
                                    <th lay-data="{field:'content', width:100}">订单内容</th>
                                    <th lay-data="{field:'completionStatus', width:100}">完成状态</th>
                                    <th lay-data="{fixed:'right', width:150, align:'center', toolbar:'#bar'}">操作</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div> -->

    <!-- 表格中的按钮 -->
    <script type="text/html" id="bar">
        <button class="layui-btn layui-btn-normal layui-btn-xs" lay-event="click">查看</button>
    </script>



    <!-- 引入jQuery和Bootstrap的JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <script src="https://cdn.staticfile.org/layui/2.5.7/layui.js"></script>
    <script src="/employee-home.js"></script>

    <script>
        layui.use(['form', 'laydate', 'table'], function () {
            var table = layui.table;
            var form = layui.form;
            // 渲染日期选择组件
            layui.laydate.render({
                elem: '#start_date',
                type: 'date',
                format: 'yyyy-MM-dd'
            });

            var url = window.location.href;
            var employeeID = url.match(/\/home\/(\d+)$/)[1];

            $(document).ready(function () {
                renderQueryCustomerTable(table, "", "", employeeID);
                renderCustomerFollowTable(table, employeeID);
                //renderOrderTable(table)
            });
            $("#addOrderBtn").click(function () {
                window.location.href = "http://localhost:8080/employee/addorder/" + employeeID;
            });
            $("#userInfoBtn").click(function () {
                window.location.href = "http://localhost:8080/employee/employeeinfo/" + employeeID;
            });
            $("#addCustomerBtn").click(function () {
                window.location.href = "http://localhost:8080/employee/addcustomer/" + employeeID;
            });
            
            $("#queryBtn").click(function () {
                let name = $("#queryName").val();
                let phone = $("#queryPhone").val();
                if (name == "" && phone == "") {
                    alert("请输入查询信息");
                    return;
                }
                renderQueryCustomerTable(table, name, phone, employeeID);
            });
        });



    </script>
</body>

</html>